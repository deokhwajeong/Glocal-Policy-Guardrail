name: Project Automation

on:
  issues:
    types: [opened, reopened, closed]
  pull_request:
    types: [opened, reopened, closed, merged]
  workflow_dispatch:

jobs:
  auto_add_to_project:
    runs-on: ubuntu-latest
    steps:
      - name: Add issue to project
        if: github.event_name == 'issues'
        uses: actions/add-to-project@v0.5.0
        with:
          project-url: https://github.com/users/deokhwajeong/projects/3
          github-token: ${{ secrets.GITHUB_TOKEN }}
          column-name: Backlog
          
      - name: Add PR to project
        if: github.event_name == 'pull_request'
        uses: actions/add-to-project@v0.5.0
        with:
          project-url: https://github.com/users/deokhwajeong/projects/3
          github-token: ${{ secrets.GITHUB_TOKEN }}
          column-name: In Progress

  update_status:
    runs-on: ubuntu-latest
    if: github.event.action == 'closed'
    steps:
      - name: Move to Done
        uses: actions/add-to-project@v0.5.0
        with:
          project-url: https://github.com/users/deokhwajeong/projects/3
          github-token: ${{ secrets.GITHUB_TOKEN }}
          column-name: Done

# Note: You need to create a Personal Access Token (PAT) with 'project' and 'repo' scopes
# and add it as a secret named GH_PROJECT_TOKEN in your repository settings:
# Settings → Secrets and variables → Actions → New repository secret
